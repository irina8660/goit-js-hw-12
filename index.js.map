{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '48859157-4179ddf5331f3749a3f2c3141',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 40,\n  },\n});\n\nexport async function getAllPhotos(inputValue, page = 1) {\n  try {\n    const response = await instance.get('', {\n      params: { q: inputValue, page },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data from Pixabay API');\n    throw error;\n  }\n}\n\n// render-functions.js\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n};\n\nexport function markupRender(arrayPhotos) {\n  const markup = arrayPhotos\n    .map(\n      photo => `\n    <div class=\"image-container\">\n      <a href=\"${photo.largeImageURL}\">\n        <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" />\n      </a>\n      <div class=\"info-bar\">\n        <div class=\"info-item\"><h3>Likes</h3><p>${photo.likes}</p></div>\n        <div class=\"info-item\"><h3>Views</h3><p>${photo.views}</p></div>\n        <div class=\"info-item\"><h3>Comments</h3><p>${photo.comments}</p></div>\n        <div class=\"info-item\"><h3>Downloads</h3><p>${photo.downloads}</p></div>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n","const refs = {\n  gallery: document.querySelector('.gallery'),\n};\n\nexport function markupRender(arrayPhotos) {\n  const markup = arrayPhotos\n    .map(\n      photo => `\n    <div class=\"image-container\">\n      <a href=\"${photo.largeImageURL}\">\n        <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" />\n      </a>\n      <div class=\"info-bar\">\n        <div class=\"info-item\"><h3>Likes</h3><p>${photo.likes}</p></div>\n        <div class=\"info-item\"><h3>Views</h3><p>${photo.views}</p></div>\n        <div class=\"info-item\"><h3>Comments</h3><p>${photo.comments}</p></div>\n        <div class=\"info-item\"><h3>Downloads</h3><p>${photo.downloads}</p></div>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import { getAllPhotos } from './js/pixabay-api.js';\nimport { markupRender } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  loader: document.querySelector('.loader-wrap'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(evt) {\n  evt.preventDefault();\n  refs.gallery.innerHTML = '';\n  refs.loadMoreBtn.classList.add('hidden');\n  refs.loader.classList.remove('disabled');\n\n  currentQuery = evt.target.elements.search.value.trim();\n  currentPage = 1;\n\n  if (!currentQuery) {\n    refs.loader.classList.add('disabled');\n    return iziToast.error({\n      message: 'Please enter a search query!',\n      position: 'topRight',\n    });\n  }\n\n  try {\n    const { hits, totalHits } = await getAllPhotos(currentQuery, currentPage);\n    refs.loader.classList.add('disabled');\n\n    if (hits.length === 0) {\n      return iziToast.error({\n        message: 'No images found. Try again!',\n        position: 'topRight',\n      });\n    }\n\n    markupRender(hits);\n    lightbox.refresh();\n\n    if (currentPage * 40 < totalHits) {\n      refs.loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    refs.loader.classList.add('disabled');\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  refs.loader.classList.remove('disabled');\n\n  try {\n    const { hits, totalHits } = await getAllPhotos(currentQuery, currentPage);\n    markupRender(hits);\n    lightbox.refresh();\n\n    const { height } = refs.gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({ top: height * 2, behavior: 'smooth' });\n\n    if (currentPage * 40 >= totalHits) {\n      refs.loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n  } finally {\n    refs.loader.classList.add('disabled');\n  }\n}\n"],"names":["instance","axios","getAllPhotos","inputValue","page","error","refs","markupRender","arrayPhotos","markup","photo","lightbox","SimpleLightbox","currentPage","currentQuery","onSearch","onLoadMore","evt","iziToast","hits","totalHits","height"],"mappings":"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"}